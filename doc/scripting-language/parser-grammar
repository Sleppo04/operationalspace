/** script is the goal of the compiler **/
// Program
script              : includelist statementlist TOKEN_EOF 



// Top-level only
includelist         : include includelist
                    | include

include             : TOKEN_INCLUDE TOKEN_STRING_LITERAL TOKEN_SEMICOLON



// Statements
persist             : TOKEN_PERSIST TOKEN_IDENTIFIER

variable_definition : TOKEN_VAR type_identifier TOKEN_IDENTIFIER TOKEN_SEMICOLON


member              : type_identifier TOKEN_IDENTIFIER TOKEN_SEMICOLON

memberlist          : member memberlist
                    | member

type_definition     : TOKEN_TYPE type_identifier TOKEN_LEFT_BRACE memberlist TOKEN_RIGHT_BRACE

return_statement    : TOKEN_RETURN expression TOKEN_SEMICOLON

member_lvalue       : TOKEN_DOT TOKEN_IDENTIFIER
                    | TOKEN_DOT TOKEN_IDENTIFIER member_lvalue

lvalue              : TOKEN_IDENTIFIER
                    | TOKEN_IDENTIFIER TOKEN_DOT member_lvalue

assignment          : lvalue TOKEN_EQUALS expression TOKEN_SEMICOLON

top_level_statement : variable_definition
                    | persist
                    | expression
					| type_definition
					| function
                    | assignment

function_statement  : variable_definition
					| expression
                    | assignment
					| return_statement

function_list       : function_statement function_list
                    | function_statement

function_compound   : TOKEN_LEFT_BRACE function_list TOKEN_RIGHT_BRACE
                    | function_statement

statementlist       : statement statementlist
                    | statement

compound_statement  : TOKEN_LEFT_BRACE statementlist TOKEN_RIGHT_BRACE
                    | statement

// Expression stuff
value               : TOKEN_IDENTIFIER
                    | TOKEN_INT_LITERAL
                    | TOKEN_FLOAT_LITERAL
                    | TOKEN_STRING_LITERAL
                    | TOKEN_FALSE
                    | TOKEN_TRUE

binop_expression    : expression TOKEN_PLUS expression
                    | expression TOKEN_MINUS expression 
                    | expression TOKEN_ASTERISK expression
                    | expression TOKEN_SLASH expression
                    | expression TOKEN_LESS_THAN expression
                    | expression TOKEN_GREATER_THAN expression
                    | expression TOKEN_LESS_THAN TOKEN_EQUALS expression
                    | expression TOKEN_GREATER_THAN TOKEN_EQUALS expression
                    | expression TOKEN_EQUALS TOKEN_EQUALS expression
                    | expression TOKEN_AMPERSAND TOKEN_AMPERSAND expression
                    | expression TOKEN_PIPE TOKEN_PIPE expression

unop_expression     : TOKEN_MINUS expression
                    | TOKEN_BANG expression

paren_expression    : TOKEN_LEFT_PARENTHESIS expression TOKEN_RIGHT_PARENTHESIS

expression          : value
                    | binop_expression
                    | unop_expression
                    | paren_expression

type_identifier	    : TOKEN_IDENTIFIER


function            : TOKEN_FUNCTION type_identifier TOKEN_IDENTIFIER TOKEN_LEFT_PARENTHESES (TOKEN_IDENTIFIER TOKEN_IDENTIFIER TOKEN_COMMA)* TOKEN_IDENTIFIER TOKEN_IDENTIFIER TOKEN_RIGHT_PARENTHESES function_compound
